<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Portfolios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.6.0/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="/Teaching/content/navbar-fixed-left.css" />
    <link type="text/css" rel="stylesheet" href="/Teaching/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="/Teaching/content/fsdocs-custom.css" />
    <script type="text/javascript" src="/Teaching/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-left" id="fsdocs-nav">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse navbar-nav-scroll" id="navbarsExampleDefault">
            <a href="/Teaching/"><img id="fsdocs-logo" src="/Teaching/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/nhirschey/Teaching/blob/main/LICENSE.md">License</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/nhirschey/Teaching">Source Repository</a></li>
                <li class="nav-header">
  Getting Started
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/install.html">
    Install Software
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/learn-fsharp.html">
    Learn F#
  </a>
</li>             
<li class="nav-header">
  Lectures
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/fundamentals.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/portfolio-statistics.html">
    Basic Portfolio Statistics
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/VolatilityTiming.html">
    Volatility Timing
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/PortfolioFormation-SimpleExample.html">
    Building a strategy
  </a>
</li>             
<li class="nav-header">
  Practice Quizzes
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/quizzes/fundamentals-PracticeQuiz.html">
    Fundamentals
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/quizzes/volatilityTiming-PracticeQuiz.html">
    Volatility Timing Part 1
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/quizzes/volatilityTiming-PracticeQuiz-2.html">
    Volatility Timing Part 2
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/quizzes/Option-Match-Map-practiceQuiz.html">
    Option Match Map
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/quizzes/discriminatedUnion-practiceQuiz.html">
    Dicriminated Union
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/quizzes/portfolios-PracticeQuiz.html">
    Portfolios
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/quizzes/factors-practiceQuiz.html">
    Factors
  </a>
</li>             
<li class="nav-header">
  Other
</li>             
<li class="nav-item">
  <a class="nav-link" href="/Teaching/Common.html">
    Common
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="/Teaching/">Teaching</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            
<p><a href="https://mybinder.org/v2/gh/nhirschey/teaching/gh-pages?filepath=quizzes/portfolios-PracticeQuiz.ipynb"><img src="../img/badge-binder.svg" alt="Binder" /></a>&emsp;
<a href="/Teaching//quizzes/portfolios-PracticeQuiz.fsx"><img src="../img/badge-script.svg" alt="Script" /></a>&emsp;
<a href="/Teaching//quizzes/portfolios-PracticeQuiz.ipynb"><img src="../img/badge-notebook.svg" alt="Notebook" /></a></p>
<h1><a name="Some-good-things-to-reference" class="anchor" href="#Some-good-things-to-reference">Some good things to reference</a></h1>
<p><a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/anonymous-records#syntax">Anonymous Records</a>. You can read the above link for details, but the point of these is quite simple.</p>
<p>Records have been our main type for holding data for an observation. We've typically defined these ahead of time with a name before using them. This is good for important types that you will use frequently.</p>
<p>If you're using a particular record in only a few lines of code, then it can feel cumbersome to define the type beforehand. Anonymous records are a good solution in these circumstances. They are records that you can essentially use like regular records that we've been using, but you don't have to define the name of the record ahead of time.</p>
<p>I rarely use anonymous records, but you might find them useful for exploratory data manipulation. They're also kind of nice for these short problems because I don't need to define a record for each problem.</p>
<h1><a name="Anonymous-records" class="anchor" href="#Anonymous-records">Anonymous records</a></h1>
<h2><a name="Question-1" class="anchor" href="#Question-1">Question 1</a></h2>
<ol>
<li>Create a <em>record</em> named <code>ExampleRec</code> that has an <code>X</code> field of type int and a <code>Y</code> field of type int. Create an example <code>ExampleRec</code> and assign it to a value named <code>r</code>.</li>
<li>Create an <em>anonymous record</em> that has an <code>X</code> field of type int and a <code>Y</code> field of type int. Create an example of the anonymous record and assign it to a value named <code>ar</code>.</li>
</ol>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// a regular named record</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="rt">ExampleRec</span> <span class="o">=</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="prop">X</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="vt">int</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="prop">Y</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs3', 5)" onmouseover="showTip(event, 'fs3', 5)" class="vt">int</span> <span class="pn">}</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 6)" onmouseover="showTip(event, 'fs5', 6)" class="id">r</span> <span class="o">=</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs2', 7)" onmouseover="showTip(event, 'fs2', 7)" class="prop">X</span> <span class="o">=</span> <span class="n">1</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs4', 8)" onmouseover="showTip(event, 'fs4', 8)" class="prop">Y</span> <span class="o">=</span> <span class="n">2</span><span class="pn">}</span>
<span class="c">// an anonymous record. The difference is</span>
<span class="c">// 1. We did not define the type ahead of time.</span>
<span class="c">// 2. We put the pipe symbole &quot;|&quot; inside the curly braces.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="id">ar</span> <span class="o">=</span> <span class="pn">{|</span> <span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="prop">X</span> <span class="o">=</span> <span class="n">1</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="prop">Y</span> <span class="o">=</span> <span class="n">2</span><span class="pn">|}</span>
<span class="c">// Note that they are not the same type, so if you</span>
<span class="c">// compare them they will be different even though</span>
<span class="c">// the X and Y fields have the same values.</span>
<span class="c">// For example, running `r = ar` </span>
<span class="c">// will give a compiler error</span>
</code></pre>
<table class="pre"><tr><td><pre><code>type ExampleRec =
  { X: int
    Y: int }
val r : ExampleRec = { X = 1
                       Y = 2 }
val ar : {| X: int; Y: int |} = { X = 1
                                  Y = 2 }</code></pre></td></tr></table>


</details>
</span>
</p>
</div>

<h2><a name="Question-2" class="anchor" href="#Question-2">Question 2</a></h2>
<p>Imagine you have this array</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="id">System</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="rt">ArExample</span> <span class="o">=</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="prop">Date</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs12', 15)" onmouseover="showTip(event, 'fs12', 15)" class="vt">DateTime</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs13', 16)" onmouseover="showTip(event, 'fs13', 16)" class="prop">Value</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs14', 17)" onmouseover="showTip(event, 'fs14', 17)" class="vt">float</span><span class="pn">}</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs15', 18)" onmouseover="showTip(event, 'fs15', 18)" class="id">arr</span> <span class="o">=</span> <span class="pn">[|</span><span class="pn">{</span> <span class="prop">Date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="fn">DateTime</span><span class="pn">(</span><span class="n">1990</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">;</span> <span class="prop">Value</span> <span class="o">=</span> <span class="n">1.25</span><span class="pn">}</span>
            <span class="pn">{</span> <span class="prop">Date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 20)" onmouseover="showTip(event, 'fs12', 20)" class="fn">DateTime</span><span class="pn">(</span><span class="n">1990</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">2</span><span class="pn">)</span><span class="pn">;</span> <span class="prop">Value</span> <span class="o">=</span> <span class="n">2.25</span><span class="pn">}</span>
            <span class="pn">{</span> <span class="prop">Date</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 21)" onmouseover="showTip(event, 'fs12', 21)" class="fn">DateTime</span><span class="pn">(</span><span class="n">1991</span><span class="pn">,</span><span class="n">1</span><span class="pn">,</span><span class="n">1</span><span class="pn">)</span><span class="pn">;</span> <span class="prop">Value</span> <span class="o">=</span> <span class="n">3.25</span><span class="pn">}</span> <span class="pn">|]</span>
</code></pre>
<ol>
<li>
Group the observations by a tuple of <code>(year,month)</code> and find the 
minimum value for each group. Report the result as a tuple of the group
and the minimum value [so it will be <code>((year, month), minValue)</code>].
</li>
<li>
Now, the same thing with anonymous records.
Group the observations by an Anonymous Record <code>{| Year = year; Month= month|}</code> and find the
minimum value for each group. Report the result as an Anonymous record with a Group
field for the group and a value field for the minimum value [so it will be
<code>{| Group = {| Year = year; Month= month|}; Value = minValue |}</code>].
</li>
</ol>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// here I will explicitly put year and month in the final result</span>
<span onmouseout="hideTip(event, 'fs15', 22)" onmouseover="showTip(event, 'fs15', 22)" class="id">arr</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 23)" onmouseover="showTip(event, 'fs16', 23)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 24)" onmouseover="showTip(event, 'fs17', 24)" class="id">groupBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 25)" onmouseover="showTip(event, 'fs18', 25)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 27)" onmouseover="showTip(event, 'fs11', 27)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 28)" onmouseover="showTip(event, 'fs19', 28)" class="id">Year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs18', 29)" onmouseover="showTip(event, 'fs18', 29)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 30)" onmouseover="showTip(event, 'fs11', 30)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 31)" onmouseover="showTip(event, 'fs20', 31)" class="id">Month</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 32)" onmouseover="showTip(event, 'fs16', 32)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 33)" onmouseover="showTip(event, 'fs21', 33)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs22', 34)" onmouseover="showTip(event, 'fs22', 34)" class="fn">group</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs23', 35)" onmouseover="showTip(event, 'fs23', 35)" class="fn">xs</span><span class="pn">)</span> <span class="k">-&gt;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 36)" onmouseover="showTip(event, 'fs24', 36)" class="fn">year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs25', 37)" onmouseover="showTip(event, 'fs25', 37)" class="fn">month</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs22', 38)" onmouseover="showTip(event, 'fs22', 38)" class="fn">group</span> <span class="c">// Explicitly access year, month; same as let a,b = (1,2)</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 39)" onmouseover="showTip(event, 'fs26', 39)" class="fn">minValue</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 40)" onmouseover="showTip(event, 'fs23', 40)" class="fn">xs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 41)" onmouseover="showTip(event, 'fs16', 41)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 42)" onmouseover="showTip(event, 'fs21', 42)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 43)" onmouseover="showTip(event, 'fs18', 43)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 44)" onmouseover="showTip(event, 'fs18', 44)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 45)" onmouseover="showTip(event, 'fs13', 45)" class="id">Value</span><span class="pn">)</span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 46)" onmouseover="showTip(event, 'fs16', 46)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 47)" onmouseover="showTip(event, 'fs27', 47)" class="id">min</span>
    <span class="pn">(</span><span onmouseout="hideTip(event, 'fs24', 48)" onmouseover="showTip(event, 'fs24', 48)" class="fn">year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs25', 49)" onmouseover="showTip(event, 'fs25', 49)" class="fn">month</span><span class="pn">)</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs26', 50)" onmouseover="showTip(event, 'fs26', 50)" class="fn">minValue</span><span class="pn">)</span> <span class="c">// explicitly put it in the result</span>

<span class="c">// here I will explicitly put year and month in the final result,</span>
<span class="c">// but I will deconstruct them using pattern matching in the</span>
<span class="c">// function input</span>
<span onmouseout="hideTip(event, 'fs15', 51)" onmouseover="showTip(event, 'fs15', 51)" class="id">arr</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 52)" onmouseover="showTip(event, 'fs16', 52)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 53)" onmouseover="showTip(event, 'fs17', 53)" class="id">groupBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 54)" onmouseover="showTip(event, 'fs18', 54)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 55)" onmouseover="showTip(event, 'fs18', 55)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 56)" onmouseover="showTip(event, 'fs11', 56)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 57)" onmouseover="showTip(event, 'fs19', 57)" class="id">Year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs18', 58)" onmouseover="showTip(event, 'fs18', 58)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 59)" onmouseover="showTip(event, 'fs11', 59)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 60)" onmouseover="showTip(event, 'fs20', 60)" class="id">Month</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 61)" onmouseover="showTip(event, 'fs16', 61)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 62)" onmouseover="showTip(event, 'fs21', 62)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs24', 63)" onmouseover="showTip(event, 'fs24', 63)" class="id">year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs25', 64)" onmouseover="showTip(event, 'fs25', 64)" class="fn">month</span><span class="pn">)</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs23', 65)" onmouseover="showTip(event, 'fs23', 65)" class="fn">xs</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="c">// Explicitly pattern match year, month in function input</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 66)" onmouseover="showTip(event, 'fs26', 66)" class="fn">minValue</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 67)" onmouseover="showTip(event, 'fs23', 67)" class="fn">xs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 68)" onmouseover="showTip(event, 'fs16', 68)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 69)" onmouseover="showTip(event, 'fs21', 69)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 70)" onmouseover="showTip(event, 'fs18', 70)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 71)" onmouseover="showTip(event, 'fs18', 71)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 72)" onmouseover="showTip(event, 'fs13', 72)" class="id">Value</span><span class="pn">)</span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 73)" onmouseover="showTip(event, 'fs16', 73)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 74)" onmouseover="showTip(event, 'fs27', 74)" class="id">min</span>
    <span class="pn">(</span><span onmouseout="hideTip(event, 'fs24', 75)" onmouseover="showTip(event, 'fs24', 75)" class="fn">year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs25', 76)" onmouseover="showTip(event, 'fs25', 76)" class="fn">month</span><span class="pn">)</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs26', 77)" onmouseover="showTip(event, 'fs26', 77)" class="fn">minValue</span><span class="pn">)</span> <span class="c">// explicitly put it in the result</span>

<span class="c">// or</span>
<span class="c">// since I&#39;m just returning the grouping variable, there&#39;s really</span>
<span class="c">// no need to deconstruct it into year, month at any point.</span>
<span onmouseout="hideTip(event, 'fs15', 78)" onmouseover="showTip(event, 'fs15', 78)" class="id">arr</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 79)" onmouseover="showTip(event, 'fs16', 79)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 80)" onmouseover="showTip(event, 'fs17', 80)" class="id">groupBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 81)" onmouseover="showTip(event, 'fs18', 81)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 82)" onmouseover="showTip(event, 'fs18', 82)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 83)" onmouseover="showTip(event, 'fs11', 83)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 84)" onmouseover="showTip(event, 'fs19', 84)" class="id">Year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs18', 85)" onmouseover="showTip(event, 'fs18', 85)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 86)" onmouseover="showTip(event, 'fs11', 86)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 87)" onmouseover="showTip(event, 'fs20', 87)" class="id">Month</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 88)" onmouseover="showTip(event, 'fs16', 88)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 89)" onmouseover="showTip(event, 'fs21', 89)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs22', 90)" onmouseover="showTip(event, 'fs22', 90)" class="fn">group</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs23', 91)" onmouseover="showTip(event, 'fs23', 91)" class="fn">xs</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="c">// match group to (year,month) together</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 92)" onmouseover="showTip(event, 'fs26', 92)" class="fn">minValue</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 93)" onmouseover="showTip(event, 'fs23', 93)" class="fn">xs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 94)" onmouseover="showTip(event, 'fs16', 94)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 95)" onmouseover="showTip(event, 'fs21', 95)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 96)" onmouseover="showTip(event, 'fs18', 96)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 97)" onmouseover="showTip(event, 'fs18', 97)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 98)" onmouseover="showTip(event, 'fs13', 98)" class="id">Value</span><span class="pn">)</span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 99)" onmouseover="showTip(event, 'fs16', 99)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 100)" onmouseover="showTip(event, 'fs27', 100)" class="id">min</span>
    <span onmouseout="hideTip(event, 'fs22', 101)" onmouseover="showTip(event, 'fs22', 101)" class="fn">group</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs26', 102)" onmouseover="showTip(event, 'fs26', 102)" class="fn">minValue</span><span class="pn">)</span>

<span class="c">// Now using anonymous records</span>
<span class="c">// This is where anonymous records can be useful.</span>
<span class="c">// For example, sometimes grouping by many things, </span>
<span class="c">// using anonymous records like this make it more clear what the different</span>
<span class="c">// grouping variables are because they have names.</span>
<span class="c">// It&#39;s like a middle ground between tuples with no clear naming structure</span>
<span class="c">// and regular named records that are very explicit.</span>
<span onmouseout="hideTip(event, 'fs15', 103)" onmouseover="showTip(event, 'fs15', 103)" class="id">arr</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 104)" onmouseover="showTip(event, 'fs16', 104)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 105)" onmouseover="showTip(event, 'fs17', 105)" class="id">groupBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 106)" onmouseover="showTip(event, 'fs18', 106)" class="fn">x</span> <span class="k">-&gt;</span> <span class="pn">{|</span> <span class="prop">Year</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 107)" onmouseover="showTip(event, 'fs18', 107)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 108)" onmouseover="showTip(event, 'fs11', 108)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 109)" onmouseover="showTip(event, 'fs19', 109)" class="id">Year</span><span class="pn">;</span> <span class="prop">Month</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 110)" onmouseover="showTip(event, 'fs18', 110)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 111)" onmouseover="showTip(event, 'fs11', 111)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 112)" onmouseover="showTip(event, 'fs20', 112)" class="id">Month</span> <span class="pn">|}</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 113)" onmouseover="showTip(event, 'fs16', 113)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 114)" onmouseover="showTip(event, 'fs21', 114)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 115)" onmouseover="showTip(event, 'fs28', 115)" class="fn">group</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs23', 116)" onmouseover="showTip(event, 'fs23', 116)" class="fn">xs</span><span class="pn">)</span> <span class="k">-&gt;</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs24', 117)" onmouseover="showTip(event, 'fs24', 117)" class="fn">year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs25', 118)" onmouseover="showTip(event, 'fs25', 118)" class="fn">month</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 119)" onmouseover="showTip(event, 'fs28', 119)" class="fn">group</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 120)" onmouseover="showTip(event, 'fs29', 120)" class="id">Year</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs28', 121)" onmouseover="showTip(event, 'fs28', 121)" class="fn">group</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 122)" onmouseover="showTip(event, 'fs30', 122)" class="id">Month</span> <span class="c">// explicit deconstruct </span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 123)" onmouseover="showTip(event, 'fs26', 123)" class="fn">minValue</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 124)" onmouseover="showTip(event, 'fs23', 124)" class="fn">xs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 125)" onmouseover="showTip(event, 'fs16', 125)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 126)" onmouseover="showTip(event, 'fs21', 126)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 127)" onmouseover="showTip(event, 'fs18', 127)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 128)" onmouseover="showTip(event, 'fs18', 128)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 129)" onmouseover="showTip(event, 'fs13', 129)" class="id">Value</span><span class="pn">)</span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 130)" onmouseover="showTip(event, 'fs16', 130)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 131)" onmouseover="showTip(event, 'fs27', 131)" class="id">min</span>
    <span class="pn">{|</span> <span class="prop">Group</span> <span class="o">=</span> <span class="pn">{|</span> <span class="prop">Year</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 132)" onmouseover="showTip(event, 'fs24', 132)" class="fn">year</span><span class="pn">;</span> <span class="prop">Month</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs25', 133)" onmouseover="showTip(event, 'fs25', 133)" class="fn">month</span><span class="pn">|}</span><span class="pn">;</span> <span class="prop">Value</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 134)" onmouseover="showTip(event, 'fs26', 134)" class="fn">minValue</span> <span class="pn">|}</span><span class="pn">)</span>

<span class="c">// or, do the same thing by returning the whole group without deconstructing</span>
<span onmouseout="hideTip(event, 'fs15', 135)" onmouseover="showTip(event, 'fs15', 135)" class="id">arr</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 136)" onmouseover="showTip(event, 'fs16', 136)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 137)" onmouseover="showTip(event, 'fs17', 137)" class="id">groupBy</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 138)" onmouseover="showTip(event, 'fs18', 138)" class="fn">x</span> <span class="k">-&gt;</span> <span class="pn">{|</span> <span class="prop">Year</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 139)" onmouseover="showTip(event, 'fs18', 139)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 140)" onmouseover="showTip(event, 'fs11', 140)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 141)" onmouseover="showTip(event, 'fs19', 141)" class="id">Year</span><span class="pn">;</span> <span class="prop">Month</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 142)" onmouseover="showTip(event, 'fs18', 142)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 143)" onmouseover="showTip(event, 'fs11', 143)" class="prop">Date</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 144)" onmouseover="showTip(event, 'fs20', 144)" class="id">Month</span> <span class="pn">|}</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 145)" onmouseover="showTip(event, 'fs16', 145)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 146)" onmouseover="showTip(event, 'fs21', 146)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 147)" onmouseover="showTip(event, 'fs28', 147)" class="fn">group</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs23', 148)" onmouseover="showTip(event, 'fs23', 148)" class="fn">xs</span><span class="pn">)</span> <span class="k">-&gt;</span> 
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 149)" onmouseover="showTip(event, 'fs26', 149)" class="fn">minValue</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 150)" onmouseover="showTip(event, 'fs23', 150)" class="fn">xs</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 151)" onmouseover="showTip(event, 'fs16', 151)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 152)" onmouseover="showTip(event, 'fs21', 152)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs18', 153)" onmouseover="showTip(event, 'fs18', 153)" class="fn">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs18', 154)" onmouseover="showTip(event, 'fs18', 154)" class="fn">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 155)" onmouseover="showTip(event, 'fs13', 155)" class="id">Value</span><span class="pn">)</span><span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 156)" onmouseover="showTip(event, 'fs16', 156)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 157)" onmouseover="showTip(event, 'fs27', 157)" class="id">min</span>
    <span class="pn">{|</span> <span class="prop">Group</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 158)" onmouseover="showTip(event, 'fs28', 158)" class="fn">group</span><span class="pn">;</span> <span class="prop">Value</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 159)" onmouseover="showTip(event, 'fs26', 159)" class="fn">minValue</span> <span class="pn">|}</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val it : {| Group: {| Month: int; Year: int |}; Value: float |} [] =
  [|{ Group = { Month = 1
                Year = 1990 }
      Value = 1.25 }; { Group = { Month = 1
                                  Year = 1991 }
                        Value = 3.25 }|]</code></pre></td></tr></table>


</details>
</span>
</p>
</div>

<h1><a name="Portfolio-Returns" class="anchor" href="#Portfolio-Returns">Portfolio Returns</a></h1>
<h2><a name="Question-1-1" class="anchor" href="#Question-1-1">Question 1</a></h2>
<p>Imagine that you have the following positions in your portfolio.
For each position you have a weight and a return.
What is the return of the entire portfolio?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs31', 160)" onmouseover="showTip(event, 'fs31', 160)" class="rt">PortReturnPos</span> <span class="o">=</span> <span class="pn">{</span> <span onmouseout="hideTip(event, 'fs32', 161)" onmouseover="showTip(event, 'fs32', 161)" class="prop">Id</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs33', 162)" onmouseover="showTip(event, 'fs33', 162)" class="rt">string</span><span class="pn">;</span>  <span onmouseout="hideTip(event, 'fs34', 163)" onmouseover="showTip(event, 'fs34', 163)" class="prop">Weight</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs14', 164)" onmouseover="showTip(event, 'fs14', 164)" class="vt">float</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs35', 165)" onmouseover="showTip(event, 'fs35', 165)" class="prop">Return</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs14', 166)" onmouseover="showTip(event, 'fs14', 166)" class="vt">float</span><span class="pn">}</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs36', 167)" onmouseover="showTip(event, 'fs36', 167)" class="id">stockPos</span> <span class="o">=</span> <span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;stock&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="n">0.25</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="n">0.1</span> <span class="pn">}</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 168)" onmouseover="showTip(event, 'fs37', 168)" class="id">bondPos</span> <span class="o">=</span> <span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;bond&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="n">0.75</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="n">0.05</span><span class="pn">}</span>
</code></pre>
<ol>
<li>
Group the observations by a tuple of <code>(year,month)</code> and find the 
minimum value for each group. Report the result as a tuple of the group
and the minimum value [so it will be <code>((year, month), minValue)</code>].
</li>
<li>
Now, the same thing with anonymous records.
Group the observations by an Anonymous Record <code>{| Year = year; Month= month|}</code> and find the
minimum value for each group. Report the result as an Anonymous record with a Group
field for the group and a value field for the minimum value [so it will be
<code>{| Group = {| Year = year; Month= month|}; Value = minValue |}</code>].
</li>
</ol>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Remember that portfolio returns are a weighted average</span>
<span class="c">// of the returns of the stocks in the portfolio. The weights</span>
<span class="c">// are the position weights.</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs38', 169)" onmouseover="showTip(event, 'fs38', 169)" class="id">stockAndBondPort</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs36', 170)" onmouseover="showTip(event, 'fs36', 170)" class="id">stockPos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 171)" onmouseover="showTip(event, 'fs34', 171)" class="id">Weight</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs36', 172)" onmouseover="showTip(event, 'fs36', 172)" class="id">stockPos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 173)" onmouseover="showTip(event, 'fs35', 173)" class="id">Return</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs37', 174)" onmouseover="showTip(event, 'fs37', 174)" class="id">bondPos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 175)" onmouseover="showTip(event, 'fs34', 175)" class="id">Weight</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs37', 176)" onmouseover="showTip(event, 'fs37', 176)" class="id">bondPos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 177)" onmouseover="showTip(event, 'fs35', 177)" class="id">Return</span>
<span class="c">// or, doing the multiplication and summation with collections</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs39', 178)" onmouseover="showTip(event, 'fs39', 178)" class="id">weightXreturn</span> <span class="o">=</span>
    <span class="pn">[|</span><span onmouseout="hideTip(event, 'fs36', 179)" onmouseover="showTip(event, 'fs36', 179)" class="id">stockPos</span><span class="pn">;</span><span onmouseout="hideTip(event, 'fs37', 180)" onmouseover="showTip(event, 'fs37', 180)" class="id">bondPos</span><span class="pn">|]</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 181)" onmouseover="showTip(event, 'fs16', 181)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 182)" onmouseover="showTip(event, 'fs21', 182)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs40', 183)" onmouseover="showTip(event, 'fs40', 183)" class="fn">pos</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 184)" onmouseover="showTip(event, 'fs40', 184)" class="fn">pos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 185)" onmouseover="showTip(event, 'fs34', 185)" class="id">Weight</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs40', 186)" onmouseover="showTip(event, 'fs40', 186)" class="fn">pos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 187)" onmouseover="showTip(event, 'fs35', 187)" class="id">Return</span><span class="pn">)</span>
<span class="c">// look at it</span>
<span onmouseout="hideTip(event, 'fs39', 188)" onmouseover="showTip(event, 'fs39', 188)" class="id">weightXreturn</span>
<span class="c">// now sum</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 189)" onmouseover="showTip(event, 'fs41', 189)" class="id">stockAndBondPort2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs39', 190)" onmouseover="showTip(event, 'fs39', 190)" class="id">weightXreturn</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 191)" onmouseover="showTip(event, 'fs16', 191)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs42', 192)" onmouseover="showTip(event, 'fs42', 192)" class="id">sum</span>
<span class="c">// check</span>
<span onmouseout="hideTip(event, 'fs38', 193)" onmouseover="showTip(event, 'fs38', 193)" class="id">stockAndBondPort</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 194)" onmouseover="showTip(event, 'fs41', 194)" class="id">stockAndBondPort2</span> <span class="c">// evaluates to true</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val stockAndBondPort : float = 0.0625
val weightXreturn : float [] = [|0.025; 0.0375|]
val stockAndBondPort2 : float = 0.0625
val it : bool = true</code></pre></td></tr></table>


</details>
</span>
</p>
</div>

<h2><a name="Question-2-1" class="anchor" href="#Question-2-1">Question 2</a></h2>
<p>Imagine that you have the following positions in your portfolio.
For each position you have a weight and a return.
What is the return of the entire portfolio?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs43', 195)" onmouseover="showTip(event, 'fs43', 195)" class="id">positions</span> <span class="o">=</span>
    <span class="pn">[|</span><span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;stock&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="n">0.25</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="n">0.12</span> <span class="pn">}</span>
      <span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;bond&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="n">0.25</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="n">0.22</span> <span class="pn">}</span>
      <span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;real-estate&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="n">0.5</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="o">-</span><span class="n">0.15</span> <span class="pn">}</span> <span class="pn">|]</span>
</code></pre>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs44', 196)" onmouseover="showTip(event, 'fs44', 196)" class="id">threeAssetPortfolioReturn</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs43', 197)" onmouseover="showTip(event, 'fs43', 197)" class="id">positions</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 198)" onmouseover="showTip(event, 'fs16', 198)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 199)" onmouseover="showTip(event, 'fs21', 199)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs40', 200)" onmouseover="showTip(event, 'fs40', 200)" class="fn">pos</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 201)" onmouseover="showTip(event, 'fs40', 201)" class="fn">pos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 202)" onmouseover="showTip(event, 'fs34', 202)" class="id">Weight</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs40', 203)" onmouseover="showTip(event, 'fs40', 203)" class="fn">pos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 204)" onmouseover="showTip(event, 'fs35', 204)" class="id">Return</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 205)" onmouseover="showTip(event, 'fs16', 205)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs42', 206)" onmouseover="showTip(event, 'fs42', 206)" class="id">sum</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val threeAssetPortfolioReturn : float = 0.01</code></pre></td></tr></table>


</details>
</span>
</p>
</div>

<h2><a name="Question-3" class="anchor" href="#Question-3">Question 3</a></h2>
<p>Imagine that you have the following positions in your portfolio.
For each position you have a weight and a return.
What is the return of the entire portfolio?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 207)" onmouseover="showTip(event, 'fs45', 207)" class="id">positionsWithShort</span> <span class="o">=</span>
    <span class="pn">[|</span><span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;stock&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="n">0.25</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="n">0.12</span> <span class="pn">}</span>
      <span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;bond&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="o">-</span><span class="n">0.25</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="n">0.22</span> <span class="pn">}</span>
      <span class="pn">{</span> <span class="prop">Id</span> <span class="o">=</span> <span class="s">&quot;real-estate&quot;</span><span class="pn">;</span> <span class="prop">Weight</span> <span class="o">=</span> <span class="n">1.0</span><span class="pn">;</span> <span class="prop">Return</span> <span class="o">=</span> <span class="o">-</span><span class="n">0.15</span> <span class="pn">}</span> <span class="pn">|]</span>
</code></pre>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs46', 208)" onmouseover="showTip(event, 'fs46', 208)" class="id">positionsWithShortReturn</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs45', 209)" onmouseover="showTip(event, 'fs45', 209)" class="id">positionsWithShort</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 210)" onmouseover="showTip(event, 'fs16', 210)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 211)" onmouseover="showTip(event, 'fs21', 211)" class="id">map</span><span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs40', 212)" onmouseover="showTip(event, 'fs40', 212)" class="fn">pos</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 213)" onmouseover="showTip(event, 'fs40', 213)" class="fn">pos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs34', 214)" onmouseover="showTip(event, 'fs34', 214)" class="id">Weight</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs40', 215)" onmouseover="showTip(event, 'fs40', 215)" class="fn">pos</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 216)" onmouseover="showTip(event, 'fs35', 216)" class="id">Return</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 217)" onmouseover="showTip(event, 'fs16', 217)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs42', 218)" onmouseover="showTip(event, 'fs42', 218)" class="id">sum</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val positionsWithShortReturn : float = -0.175</code></pre></td></tr></table>


</details>
</span>
</p>
</div>

<h1><a name="Sharpe-Ratios" class="anchor" href="#Sharpe-Ratios">Sharpe Ratios</a></h1>
<h2><a name="Question-1-2" class="anchor" href="#Question-1-2">Question 1</a></h2>
<p>Imagine that you have the following array of <em>annual</em> returns in
excess of the risk-free rate. What is the <em>annualized</em> Sharpe ratio?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 219)" onmouseover="showTip(event, 'fs47', 219)" class="id">rets</span> <span class="o">=</span> <span class="pn">[|</span> <span class="n">0.1</span><span class="pn">;</span> <span class="o">-</span><span class="n">0.4</span><span class="pn">;</span> <span class="n">0.2</span><span class="pn">;</span> <span class="n">0.15</span><span class="pn">;</span> <span class="o">-</span><span class="n">0.03</span> <span class="pn">|]</span>
<span class="c">//Note that the units are such that 0.1 is 10%.</span>
</code></pre>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;nuget: FSharp.Stats&quot;</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs48', 220)" onmouseover="showTip(event, 'fs48', 220)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs49', 221)" onmouseover="showTip(event, 'fs49', 221)" class="id">Stats</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs50', 222)" onmouseover="showTip(event, 'fs50', 222)" class="id">retsAvg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 223)" onmouseover="showTip(event, 'fs47', 223)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 224)" onmouseover="showTip(event, 'fs16', 224)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 225)" onmouseover="showTip(event, 'fs51', 225)" class="id">average</span>
<span class="c">// we get stDev from FSharp.Stats</span>
<span class="c">// there is only a Seq.stDev, not Array.stDev.</span>
<span class="c">// We can use Seq.stDev with array because you</span>
<span class="c">// can pipe any collection to a Seq.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 226)" onmouseover="showTip(event, 'fs52', 226)" class="id">retsStdDev</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 227)" onmouseover="showTip(event, 'fs47', 227)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 228)" onmouseover="showTip(event, 'fs53', 228)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 229)" onmouseover="showTip(event, 'fs54', 229)" class="id">stDev</span> 
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs55', 230)" onmouseover="showTip(event, 'fs55', 230)" class="id">retsSharpeRatio</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 231)" onmouseover="showTip(event, 'fs50', 231)" class="id">retsAvg</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs52', 232)" onmouseover="showTip(event, 'fs52', 232)" class="id">retsStdDev</span>
</code></pre>
<table class="pre"><tr><td><pre><code>[Loading C:\Users\runneradmin\AppData\Local\Temp\nuget\4604--9822b8ab-06a9-4b4d-8337-ac4e31b82da8\Project.fsproj.fsx]
namespace FSI_2982.Project

val retsAvg : float = 0.004
val retsStdDev : float = 0.241516045
val retsSharpeRatio : float = 0.01656204663</code></pre></td></tr></table>


</details>
</span>
</p>
</div>

<h2><a name="Question-2-2" class="anchor" href="#Question-2-2">Question 2</a></h2>
<p>Imagine that you have the following array of <em>monthly</em> returns in
excess of the risk-free rate. What is the <em>annualized</em> Sharpe ratio?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 277)" onmouseover="showTip(event, 'fs47', 277)" class="id">rets</span> <span class="o">=</span> <span class="pn">[|</span> <span class="n">0.1</span><span class="pn">;</span> <span class="o">-</span><span class="n">0.4</span><span class="pn">;</span> <span class="n">0.2</span><span class="pn">;</span> <span class="n">0.15</span><span class="pn">;</span> <span class="o">-</span><span class="n">0.03</span> <span class="pn">|]</span>
<span class="c">//Note that the units are such that 0.1 is 10%.</span>
</code></pre>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// remember that to annualize an arithmetic return,</span>
<span class="c">// we do return * (# compounding periods per year)</span>
<span class="c">// to annualize a standard deviation, </span>
<span class="c">// we do sd * sqrt(# compounding periods per year)</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 234)" onmouseover="showTip(event, 'fs56', 234)" class="id">monthlyRetsAnnualizedAvg</span> <span class="o">=</span> <span class="n">12.0</span><span class="o">*</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs47', 235)" onmouseover="showTip(event, 'fs47', 235)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 236)" onmouseover="showTip(event, 'fs16', 236)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 237)" onmouseover="showTip(event, 'fs51', 237)" class="id">average</span><span class="pn">)</span>
<span class="c">// or</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs57', 238)" onmouseover="showTip(event, 'fs57', 238)" class="id">monthlyRetsAnnualizedAvg2</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs47', 239)" onmouseover="showTip(event, 'fs47', 239)" class="id">rets</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 240)" onmouseover="showTip(event, 'fs16', 240)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 241)" onmouseover="showTip(event, 'fs51', 241)" class="id">average</span> 
    <span class="c">// now we&#39;re going to use a lambda expression.</span>
    <span class="c">// this is the same idea as when we do Array.map(fun x -&gt; ...)</span>
    <span class="c">// except now we&#39;re only piping a float, not an array so</span>
    <span class="c">// we&#39;re leaving off the &quot;Array.map&quot; </span>
    <span class="o">|&gt;</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs58', 242)" onmouseover="showTip(event, 'fs58', 242)" class="fn">avg</span> <span class="k">-&gt;</span> <span class="n">12.0</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs58', 243)" onmouseover="showTip(event, 'fs58', 243)" class="fn">avg</span><span class="pn">)</span> 
<span class="c">// or, in two steps</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs59', 244)" onmouseover="showTip(event, 'fs59', 244)" class="id">monthlyRetsAvg</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 245)" onmouseover="showTip(event, 'fs47', 245)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 246)" onmouseover="showTip(event, 'fs16', 246)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 247)" onmouseover="showTip(event, 'fs51', 247)" class="id">average</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs60', 248)" onmouseover="showTip(event, 'fs60', 248)" class="id">monthlyRetsAnnualizedAvg3</span> <span class="o">=</span> <span class="n">12.0</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs59', 249)" onmouseover="showTip(event, 'fs59', 249)" class="id">monthlyRetsAvg</span>

<span class="c">// now the standard deviation</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs61', 250)" onmouseover="showTip(event, 'fs61', 250)" class="id">monthlyRetsAnnualizedSd</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs47', 251)" onmouseover="showTip(event, 'fs47', 251)" class="id">rets</span> 
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 252)" onmouseover="showTip(event, 'fs53', 252)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 253)" onmouseover="showTip(event, 'fs54', 253)" class="id">stDev</span>
    <span class="o">|&gt;</span> <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs62', 254)" onmouseover="showTip(event, 'fs62', 254)" class="fn">monthlySd</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs63', 255)" onmouseover="showTip(event, 'fs63', 255)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs62', 256)" onmouseover="showTip(event, 'fs62', 256)" class="fn">monthlySd</span>
<span class="c">//or, in two steps</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs64', 257)" onmouseover="showTip(event, 'fs64', 257)" class="id">monthlyRetsSd</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 258)" onmouseover="showTip(event, 'fs47', 258)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 259)" onmouseover="showTip(event, 'fs53', 259)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 260)" onmouseover="showTip(event, 'fs54', 260)" class="id">stDev</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs65', 261)" onmouseover="showTip(event, 'fs65', 261)" class="id">monthlyRetsAnnualizedSd2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs63', 262)" onmouseover="showTip(event, 'fs63', 262)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs64', 263)" onmouseover="showTip(event, 'fs64', 263)" class="id">monthlyRetsSd</span>

<span class="c">// SharpeRatio</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs66', 264)" onmouseover="showTip(event, 'fs66', 264)" class="id">annualizedSharpeFromMonthly</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs56', 265)" onmouseover="showTip(event, 'fs56', 265)" class="id">monthlyRetsAnnualizedAvg</span> <span class="o">/</span> <span onmouseout="hideTip(event, 'fs61', 266)" onmouseover="showTip(event, 'fs61', 266)" class="id">monthlyRetsAnnualizedSd</span>

<span class="c">// or, since 12.0/sqrt(12.0) = sqrt(12.0) then</span>
<span class="c">// (monthlyRetsAvg *12.0)/(monthlyRetsSd*sqrt(12.0)) = </span>
<span class="c">//      sqrt(12.0)*(monthlyRetsAvg/monthlyRetsSd)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 267)" onmouseover="showTip(event, 'fs67', 267)" class="id">annualizedSharpeFromMonthly2</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs63', 268)" onmouseover="showTip(event, 'fs63', 268)" class="fn">sqrt</span><span class="pn">(</span><span class="n">12.0</span><span class="pn">)</span> <span class="o">*</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs59', 269)" onmouseover="showTip(event, 'fs59', 269)" class="id">monthlyRetsAvg</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs64', 270)" onmouseover="showTip(event, 'fs64', 270)" class="id">monthlyRetsSd</span><span class="pn">)</span>

<span class="c">// check</span>
<span class="c">// we have to round because floating point math gives us slightly different #&#39;s</span>
<span class="c">// recall from the fundamentals lecture how floating point math is inexact.</span>
<span onmouseout="hideTip(event, 'fs68', 271)" onmouseover="showTip(event, 'fs68', 271)" class="id">Math</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs69', 272)" onmouseover="showTip(event, 'fs69', 272)" class="id">Round</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs66', 273)" onmouseover="showTip(event, 'fs66', 273)" class="id">annualizedSharpeFromMonthly</span><span class="pn">,</span><span class="n">6</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs68', 274)" onmouseover="showTip(event, 'fs68', 274)" class="id">Math</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs69', 275)" onmouseover="showTip(event, 'fs69', 275)" class="id">Round</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs67', 276)" onmouseover="showTip(event, 'fs67', 276)" class="id">annualizedSharpeFromMonthly2</span><span class="pn">,</span><span class="n">6</span><span class="pn">)</span> <span class="c">// true</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val monthlyRetsAnnualizedAvg : float = 0.048
val monthlyRetsAnnualizedAvg2 : float = 0.048
val monthlyRetsAvg : float = 0.004
val monthlyRetsAnnualizedAvg3 : float = 0.048
val monthlyRetsAnnualizedSd : float = 0.8366361216
val monthlyRetsSd : float = 0.241516045
val monthlyRetsAnnualizedSd2 : float = 0.8366361216
val annualizedSharpeFromMonthly : float = 0.05737261249
val annualizedSharpeFromMonthly2 : float = 0.05737261249
val it : bool = true</code></pre></td></tr></table>


</details>
</span>
</p>
</div>

<h2><a name="Question-3-1" class="anchor" href="#Question-3-1">Question 3</a></h2>
<p>Imagine that you have the following array of <em>daily</em> returns in
excess of the risk-free rate. What is the <em>annualized</em> Sharpe ratio?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 277)" onmouseover="showTip(event, 'fs47', 277)" class="id">rets</span> <span class="o">=</span> <span class="pn">[|</span> <span class="n">0.1</span><span class="pn">;</span> <span class="o">-</span><span class="n">0.4</span><span class="pn">;</span> <span class="n">0.2</span><span class="pn">;</span> <span class="n">0.15</span><span class="pn">;</span> <span class="o">-</span><span class="n">0.03</span> <span class="pn">|]</span>
<span class="c">//Note that the units are such that 0.1 is 10%.</span>
</code></pre>

<div style="padding-left: 40px;">
<p> 
<span>
<details>
<summary><p style="display:inline">answer</p></summary>


<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Convention for daily is 252 trading days per year.</span>
<span class="c">// so annualize daily by multiplying by sqrt(252.0)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs70', 278)" onmouseover="showTip(event, 'fs70', 278)" class="id">annualizedSharpeFromDaily</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs71', 279)" onmouseover="showTip(event, 'fs71', 279)" class="fn">avgRet</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 280)" onmouseover="showTip(event, 'fs47', 280)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 281)" onmouseover="showTip(event, 'fs16', 281)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 282)" onmouseover="showTip(event, 'fs51', 282)" class="id">average</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs72', 283)" onmouseover="showTip(event, 'fs72', 283)" class="fn">stdevRet</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 284)" onmouseover="showTip(event, 'fs47', 284)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 285)" onmouseover="showTip(event, 'fs53', 285)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 286)" onmouseover="showTip(event, 'fs54', 286)" class="id">stDev</span>
    <span onmouseout="hideTip(event, 'fs63', 287)" onmouseover="showTip(event, 'fs63', 287)" class="fn">sqrt</span><span class="pn">(</span><span class="n">252.0</span><span class="pn">)</span> <span class="o">*</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs71', 288)" onmouseover="showTip(event, 'fs71', 288)" class="fn">avgRet</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs72', 289)" onmouseover="showTip(event, 'fs72', 289)" class="fn">stdevRet</span><span class="pn">)</span>
<span class="c">// or in multiple steps</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs73', 290)" onmouseover="showTip(event, 'fs73', 290)" class="id">dailyAvgRet</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 291)" onmouseover="showTip(event, 'fs47', 291)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs16', 292)" onmouseover="showTip(event, 'fs16', 292)" class="m">Array</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 293)" onmouseover="showTip(event, 'fs51', 293)" class="id">average</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs74', 294)" onmouseover="showTip(event, 'fs74', 294)" class="id">dailyStDevRet</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs47', 295)" onmouseover="showTip(event, 'fs47', 295)" class="id">rets</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 296)" onmouseover="showTip(event, 'fs53', 296)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 297)" onmouseover="showTip(event, 'fs54', 297)" class="id">stDev</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs75', 298)" onmouseover="showTip(event, 'fs75', 298)" class="id">annualizedSharpeFromDaily2</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs63', 299)" onmouseover="showTip(event, 'fs63', 299)" class="fn">sqrt</span><span class="pn">(</span><span class="n">252.0</span><span class="pn">)</span> <span class="o">*</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs73', 300)" onmouseover="showTip(event, 'fs73', 300)" class="id">dailyAvgRet</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs74', 301)" onmouseover="showTip(event, 'fs74', 301)" class="id">dailyStDevRet</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>val annualizedSharpeFromDaily : float = 0.2629143395
val dailyAvgRet : float = 0.004
val dailyStDevRet : float = 0.241516045
val annualizedSharpeFromDaily2 : float = 0.2629143395</code></pre></td></tr></table>


</details>
</span>
</p>
</div>


            <div class="fsdocs-tip" id="fs1">type ExampleRec =
  { X: int
    Y: int }</div>
<div class="fsdocs-tip" id="fs2">ExampleRec.X: int</div>
<div class="fsdocs-tip" id="fs3">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><em>&lt;summary&gt;Converts the argument to signed 32-bit integer. This is a direct conversion for all 
 primitive numeric types. For strings, the input is converted using &lt;c&gt;Int32.Parse()&lt;/c&gt;  
 with InvariantCulture settings. Otherwise the operation requires an appropriate
 static conversion method on the input type.&lt;/summary&gt;<br />&lt;param name=&quot;value&quot;&gt;The input value.&lt;/param&gt;<br />&lt;returns&gt;The converted int&lt;/returns&gt;</em><br /><br />--------------------<br />[&lt;Struct&gt;]
type int = int32<br /><em>&lt;summary&gt;An abbreviation for the CLI type &lt;see cref=&quot;T:System.Int32&quot; /&gt;.&lt;/summary&gt;<br />&lt;category&gt;Basic Types&lt;/category&gt;</em><br /><br />--------------------<br />type int&lt;&#39;Measure&gt; =
  int<br /><em>&lt;summary&gt;The type of 32-bit signed integer numbers, annotated with a unit of measure. The unit
 of measure is erased in compiled code and when values of this type
 are analyzed using reflection. The type is representationally equivalent to 
 &lt;see cref=&quot;T:System.Int32&quot; /&gt;.&lt;/summary&gt;<br />&lt;category&gt;Basic Types with Units of Measure&lt;/category&gt;</em></div>
<div class="fsdocs-tip" id="fs4">ExampleRec.Y: int</div>
<div class="fsdocs-tip" id="fs5">val r : ExampleRec</div>
<div class="fsdocs-tip" id="fs6">val ar : {| X: int; Y: int |}</div>
<div class="fsdocs-tip" id="fs7">anonymous record field X: int</div>
<div class="fsdocs-tip" id="fs8">anonymous record field Y: int</div>
<div class="fsdocs-tip" id="fs9">namespace System</div>
<div class="fsdocs-tip" id="fs10">type ArExample =
  { Date: DateTime
    Value: float }</div>
<div class="fsdocs-tip" id="fs11">ArExample.Date: DateTime</div>
<div class="fsdocs-tip" id="fs12">Multiple items<br />[&lt;Struct&gt;]
type DateTime =
  new : year: int * month: int * day: int -&gt; unit + 10 overloads
  member Add : value: TimeSpan -&gt; DateTime
  member AddDays : value: float -&gt; DateTime
  member AddHours : value: float -&gt; DateTime
  member AddMilliseconds : value: float -&gt; DateTime
  member AddMinutes : value: float -&gt; DateTime
  member AddMonths : months: int -&gt; DateTime
  member AddSeconds : value: float -&gt; DateTime
  member AddTicks : value: int64 -&gt; DateTime
  member AddYears : value: int -&gt; DateTime
  ...<br /><em>&lt;summary&gt;Represents an instant in time, typically expressed as a date and time of day.&lt;/summary&gt;</em><br /><br />--------------------<br />DateTime ()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="fsdocs-tip" id="fs13">ArExample.Value: float</div>
<div class="fsdocs-tip" id="fs14">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><em>&lt;summary&gt;Converts the argument to 64-bit float. This is a direct conversion for all 
 primitive numeric types. For strings, the input is converted using &lt;c&gt;Double.Parse()&lt;/c&gt;  
 with InvariantCulture settings. Otherwise the operation requires an appropriate
 static conversion method on the input type.&lt;/summary&gt;<br />&lt;param name=&quot;value&quot;&gt;The input value.&lt;/param&gt;<br />&lt;returns&gt;The converted float&lt;/returns&gt;</em><br /><br />--------------------<br />[&lt;Struct&gt;]
type float = Double<br /><em>&lt;summary&gt;An abbreviation for the CLI type &lt;see cref=&quot;T:System.Double&quot; /&gt;.&lt;/summary&gt;<br />&lt;category&gt;Basic Types&lt;/category&gt;</em><br /><br />--------------------<br />type float&lt;&#39;Measure&gt; =
  float<br /><em>&lt;summary&gt;The type of double-precision floating point numbers, annotated with a unit of measure. 
 The unit of measure is erased in compiled code and when values of this type
 are analyzed using reflection. The type is representationally equivalent to 
 &lt;see cref=&quot;T:System.Double&quot; /&gt;.&lt;/summary&gt;<br />&lt;category index=&quot;6&quot;&gt;Basic Types with Units of Measure&lt;/category&gt;</em></div>
<div class="fsdocs-tip" id="fs15">val arr : ArExample []</div>
<div class="fsdocs-tip" id="fs16">type Array =
  interface ICollection
  interface IEnumerable
  interface IList
  interface IStructuralComparable
  interface IStructuralEquatable
  interface ICloneable
  new : unit -&gt; unit
  member Clone : unit -&gt; obj
  member CopyTo : array: Array * index: int -&gt; unit + 1 overload
  member GetEnumerator : unit -&gt; IEnumerator
  ...<br /><em>&lt;summary&gt;Provides methods for creating, manipulating, searching, and sorting arrays, thereby serving as the base class for all arrays in the common language runtime.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs17">val groupBy : projection:(&#39;T -&gt; &#39;Key) -&gt; array:&#39;T [] -&gt; (&#39;Key * &#39;T []) [] (requires equality)<br /><em>&lt;summary&gt;Applies a key-generating function to each element of an array and yields an array of 
 unique keys. Each unique key contains an array of all elements that match 
 to this key.&lt;/summary&gt;<br />&lt;param name=&quot;projection&quot;&gt;A function that transforms an element of the array into a comparable key.&lt;/param&gt;<br />&lt;param name=&quot;array&quot;&gt;The input array.&lt;/param&gt;<br />&lt;returns&gt;The result array.&lt;/returns&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Thrown when the input array is null.&lt;/exception&gt;</em></div>
<div class="fsdocs-tip" id="fs18">val x : ArExample</div>
<div class="fsdocs-tip" id="fs19">property DateTime.Year: int with get<br /><em>&lt;summary&gt;Gets the year component of the date represented by this instance.&lt;/summary&gt;<br />&lt;returns&gt;The year, between 1 and 9999.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs20">property DateTime.Month: int with get<br /><em>&lt;summary&gt;Gets the month component of the date represented by this instance.&lt;/summary&gt;<br />&lt;returns&gt;The month component, expressed as a value between 1 and 12.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs21">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; array:&#39;T [] -&gt; &#39;U []<br /><em>&lt;summary&gt;Builds a new array whose elements are the results of applying the given function
 to each of the elements of the array.&lt;/summary&gt;<br />&lt;param name=&quot;mapping&quot;&gt;The function to transform elements of the array.&lt;/param&gt;<br />&lt;param name=&quot;array&quot;&gt;The input array.&lt;/param&gt;<br />&lt;returns&gt;The array of transformed elements.&lt;/returns&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Thrown when the input array is null.&lt;/exception&gt;</em></div>
<div class="fsdocs-tip" id="fs22">val group : int * int</div>
<div class="fsdocs-tip" id="fs23">val xs : ArExample []</div>
<div class="fsdocs-tip" id="fs24">val year : int</div>
<div class="fsdocs-tip" id="fs25">val month : int</div>
<div class="fsdocs-tip" id="fs26">val minValue : float</div>
<div class="fsdocs-tip" id="fs27">val min : array:&#39;T [] -&gt; &#39;T (requires comparison)<br /><em>&lt;summary&gt;Returns the lowest of all elements of the array, compared via Operators.min.&lt;/summary&gt;<br />&lt;remarks&gt;Throws ArgumentException for empty arrays&lt;/remarks&gt;<br />&lt;param name=&quot;array&quot;&gt;The input array.&lt;/param&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Thrown when the input array is null.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.ArgumentException&quot;&gt;Thrown when the input array is empty.&lt;/exception&gt;<br />&lt;returns&gt;The minimum element.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs28">val group : {| Month: int; Year: int |}</div>
<div class="fsdocs-tip" id="fs29">anonymous record field Year: int</div>
<div class="fsdocs-tip" id="fs30">anonymous record field Month: int</div>
<div class="fsdocs-tip" id="fs31">type PortReturnPos =
  { Id: string
    Weight: float
    Return: float }</div>
<div class="fsdocs-tip" id="fs32">PortReturnPos.Id: string</div>
<div class="fsdocs-tip" id="fs33">Multiple items<br />val string : value:&#39;T -&gt; string<br /><em>&lt;summary&gt;Converts the argument to a string using &lt;c&gt;ToString&lt;/c&gt;.&lt;/summary&gt;<br />&lt;remarks&gt;For standard integer and floating point values the and any type that implements &lt;c&gt;IFormattable&lt;/c&gt;&lt;c&gt;ToString&lt;/c&gt; conversion uses &lt;c&gt;CultureInfo.InvariantCulture&lt;/c&gt;. &lt;/remarks&gt;<br />&lt;param name=&quot;value&quot;&gt;The input value.&lt;/param&gt;<br />&lt;returns&gt;The converted string.&lt;/returns&gt;</em><br /><br />--------------------<br />type string = String<br /><em>&lt;summary&gt;An abbreviation for the CLI type &lt;see cref=&quot;T:System.String&quot; /&gt;.&lt;/summary&gt;<br />&lt;category&gt;Basic Types&lt;/category&gt;</em></div>
<div class="fsdocs-tip" id="fs34">PortReturnPos.Weight: float</div>
<div class="fsdocs-tip" id="fs35">PortReturnPos.Return: float</div>
<div class="fsdocs-tip" id="fs36">val stockPos : PortReturnPos</div>
<div class="fsdocs-tip" id="fs37">val bondPos : PortReturnPos</div>
<div class="fsdocs-tip" id="fs38">val stockAndBondPort : float</div>
<div class="fsdocs-tip" id="fs39">val weightXreturn : float []</div>
<div class="fsdocs-tip" id="fs40">val pos : PortReturnPos</div>
<div class="fsdocs-tip" id="fs41">val stockAndBondPort2 : float</div>
<div class="fsdocs-tip" id="fs42">val sum : array:&#39;T [] -&gt; &#39;T (requires member ( + ) and member get_Zero)<br /><em>&lt;summary&gt;Returns the sum of the elements in the array.&lt;/summary&gt;<br />&lt;param name=&quot;array&quot;&gt;The input array.&lt;/param&gt;<br />&lt;returns&gt;The resulting sum.&lt;/returns&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Thrown when the input array is null.&lt;/exception&gt;</em></div>
<div class="fsdocs-tip" id="fs43">val positions : PortReturnPos []</div>
<div class="fsdocs-tip" id="fs44">val threeAssetPortfolioReturn : float</div>
<div class="fsdocs-tip" id="fs45">val positionsWithShort : PortReturnPos []</div>
<div class="fsdocs-tip" id="fs46">val positionsWithShortReturn : float</div>
<div class="fsdocs-tip" id="fs47">val rets : float []</div>
<div class="fsdocs-tip" id="fs48">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs49">namespace FSharp.Stats</div>
<div class="fsdocs-tip" id="fs50">val retsAvg : float</div>
<div class="fsdocs-tip" id="fs51">val average : array:&#39;T [] -&gt; &#39;T (requires member ( + ) and member DivideByInt and member get_Zero)<br /><em>&lt;summary&gt;Returns the average of the elements in the array.&lt;/summary&gt;<br />&lt;param name=&quot;array&quot;&gt;The input array.&lt;/param&gt;<br />&lt;exception cref=&quot;T:System.ArgumentException&quot;&gt;Thrown when &lt;c&gt;array&lt;/c&gt; is empty.&lt;/exception&gt;<br />&lt;exception cref=&quot;T:System.ArgumentNullException&quot;&gt;Thrown when the input array is null.&lt;/exception&gt;<br />&lt;returns&gt;The average of the elements in the array.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs52">val retsStdDev : float</div>
<div class="fsdocs-tip" id="fs53">Multiple items<br />module Seq

from FSharp.Stats<br /><em>&lt;summary&gt;
 Module to compute common statistical measure
&lt;/summary&gt;</em><br /><br />--------------------<br />module Seq

from Microsoft.FSharp.Collections<br /><em>&lt;summary&gt;Contains operations for working with values of type &lt;see cref=&quot;T:Microsoft.FSharp.Collections.seq`1&quot; /&gt;.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs54">val stDev : items:seq&lt;&#39;T&gt; -&gt; &#39;U (requires member ( - ) and member get_Zero and member DivideByInt and member ( + ) and member ( * ) and member ( + ) and member ( / ) and member Sqrt)<br /><em>&lt;summary&gt;
   Computes the sample standard deviation
 &lt;/summary&gt;<br />&lt;param name=&quot;items&quot;&gt;The input sequence.&lt;/param&gt;<br />&lt;remarks&gt;Returns NaN if data is empty or if any entry is NaN.&lt;/remarks&gt;<br />&lt;returns&gt;standard deviation of a sample (Bessel&#39;s correction by N-1)&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs55">val retsSharpeRatio : float</div>
<div class="fsdocs-tip" id="fs56">val monthlyRetsAnnualizedAvg : float</div>
<div class="fsdocs-tip" id="fs57">val monthlyRetsAnnualizedAvg2 : float</div>
<div class="fsdocs-tip" id="fs58">val avg : float</div>
<div class="fsdocs-tip" id="fs59">val monthlyRetsAvg : float</div>
<div class="fsdocs-tip" id="fs60">val monthlyRetsAnnualizedAvg3 : float</div>
<div class="fsdocs-tip" id="fs61">val monthlyRetsAnnualizedSd : float</div>
<div class="fsdocs-tip" id="fs62">val monthlySd : float</div>
<div class="fsdocs-tip" id="fs63">val sqrt : value:&#39;T -&gt; &#39;U (requires member Sqrt)<br /><em>&lt;summary&gt;Square root of the given number&lt;/summary&gt;<br />&lt;param name=&quot;value&quot;&gt;The input value.&lt;/param&gt;<br />&lt;returns&gt;The square root of the input.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs64">val monthlyRetsSd : float</div>
<div class="fsdocs-tip" id="fs65">val monthlyRetsAnnualizedSd2 : float</div>
<div class="fsdocs-tip" id="fs66">val annualizedSharpeFromMonthly : float</div>
<div class="fsdocs-tip" id="fs67">val annualizedSharpeFromMonthly2 : float</div>
<div class="fsdocs-tip" id="fs68">type Math =
  static member Abs : value: decimal -&gt; decimal + 7 overloads
  static member Acos : d: float -&gt; float
  static member Acosh : d: float -&gt; float
  static member Asin : d: float -&gt; float
  static member Asinh : d: float -&gt; float
  static member Atan : d: float -&gt; float
  static member Atan2 : y: float * x: float -&gt; float
  static member Atanh : d: float -&gt; float
  static member BigMul : a: int * b: int -&gt; int64 + 2 overloads
  static member BitDecrement : x: float -&gt; float
  ...<br /><em>&lt;summary&gt;Provides constants and static methods for trigonometric, logarithmic, and other common mathematical functions.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs69">Math.Round(a: float) : float<br />Math.Round(d: decimal) : decimal<br />Math.Round(value: float, mode: MidpointRounding) : float<br />Math.Round(value: float, digits: int) : float<br />Math.Round(d: decimal, mode: MidpointRounding) : decimal<br />Math.Round(d: decimal, decimals: int) : decimal<br />Math.Round(value: float, digits: int, mode: MidpointRounding) : float<br />Math.Round(d: decimal, decimals: int, mode: MidpointRounding) : decimal</div>
<div class="fsdocs-tip" id="fs70">val annualizedSharpeFromDaily : float</div>
<div class="fsdocs-tip" id="fs71">val avgRet : float</div>
<div class="fsdocs-tip" id="fs72">val stdevRet : float</div>
<div class="fsdocs-tip" id="fs73">val dailyAvgRet : float</div>
<div class="fsdocs-tip" id="fs74">val dailyStDevRet : float</div>
<div class="fsdocs-tip" id="fs75">val annualizedSharpeFromDaily2 : float</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = '/Teaching/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="/Teaching/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    </div>
</body>

</html>